{"version":3,"file":"categories-grid/interactivity.js","mappings":";;;;;;;;;AAAA;;;;;;SCAA;SACA;;SAEA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;;SAEA;SACA;;SAEA;SACA;SACA;;;;;UCtBA;UACA;UACA;UACA,uDAAuD,iBAAiB;UACxE;UACA,gDAAgD,aAAa;UAC7D;;;;;;;;;;;;ACN6D;AAE7DC,+DAAK,CAAC,yBAAyB,EAAE;EAChCC,KAAK,EAAEA,CAAA,MAAO;IACbC,gBAAgB,EAAE,IAAI;IACtBC,oBAAoB,EAAE,IAAI;IAC1BC,OAAO,EAAE,KAAK;IACdC,YAAY,EAAE;EACf,CAAC,CAAC;EACFC,OAAO,EAAE;IACR,MAAMC,YAAYA,CAACC,KAAK,EAAE;MAEzBC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAE3B,MAAMC,OAAO,GAAGZ,oEAAU,CAAC,CAAC;MAC5B,MAAMa,KAAK,GAAGJ,KAAK,CAACK,MAAM,CAACC,OAAO,CAAC,uBAAuB,CAAC;MAC3D,MAAMb,KAAK,GAAGD,+DAAK,CAAE,yBAA0B,CAAC,CAACC,KAAK;MAEtD,MAAMc,UAAU,GAAGP,KAAK,CAACK,MAAM,CAACC,OAAO,CAAC,iBAAiB,CAAC;MAC1D,MAAME,UAAU,GAAGD,UAAU,EAAEE,OAAO,CAACD,UAAU;MACjD,MAAME,YAAY,GAAGH,UAAU,EAAEE,OAAO,CAACC,YAAY;MACrD,MAAMC,YAAY,GAAGP,KAAK,CAACQ,aAAa,CAAC,gBAAgB,CAAC;MAC1D,MAAMC,YAAY,GAAGF,YAAY,EAAEF,OAAO,CAACK,GAAG;MAE9CX,OAAO,CAACN,YAAY,GAAG,IAAI;MAC3BM,OAAO,CAACT,gBAAgB,GAAGc,UAAU;MACrCL,OAAO,CAACR,oBAAoB,GAAGe,YAAY;MAE3C,IAAIG,YAAY,KAAKL,UAAU,EAAE;MAEjCL,OAAO,CAACP,OAAO,GAAG,IAAI;MACtBe,YAAY,CAACI,SAAS,GAAG,EAAE;MAE3B,IAAI;QACH,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACxB,KAAK,CAACyB,OAAO,EAAE;UAC3CC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACR,cAAc,EAAE;UACjB,CAAC;UACDC,IAAI,EAAE,IAAIC,eAAe,CAAC;YACzBC,MAAM,EAAE,2BAA2B;YACnCC,KAAK,EAAE/B,KAAK,CAAC+B,KAAK;YAClBC,WAAW,EAAEjB;UACd,CAAC;QACF,CAAC,CAAC;QAEF,MAAMkB,IAAI,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;QAElC1B,OAAO,CAACC,GAAG,CAAC,MAAM,EAACwB,IAAI,CAAC;QAExB,IAAIA,IAAI,CAACE,OAAO,EAAE;UACjBjB,YAAY,CAACI,SAAS,GAAGW,IAAI,CAACA,IAAI,CAACG,QAAQ,CACzCC,GAAG,CACFC,OAAO,IAAK;AACpB;AACA,oBAAoBA,OAAO,CAACC,KAAK,UAAUD,OAAO,CAACE,KAAK;AACxD,cAAcF,OAAO,CAACE,KAAK;AAC3B,6BAA6BF,OAAO,CAACG,KAAK;AAC1C,mBAAmBH,OAAO,CAACI,IAAI;AAC/B;AACA,OACM,CAAC,CACAC,IAAI,CAAC,EAAE,CAAC;UAEVhC,KAAK,CACHiC,gBAAgB,CAAC,sBAAsB,CAAC,CACxCC,OAAO,CAAEC,EAAE,IAAKA,EAAE,CAACC,YAAY,CAAC,MAAM,EAAEd,IAAI,CAACA,IAAI,CAACe,aAAa,CAAC,CAAC;QACpE;MACD,CAAC,CAAC,OAAOC,KAAK,EAAE;QACfzC,OAAO,CAACyC,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACrC,CAAC,SAAS;QACTvC,OAAO,CAACP,OAAO,GAAG,KAAK;MACxB;IACD,CAAC;IACD+C,UAAUA,CAAA,EAAG;MACZ,MAAMxC,OAAO,GAAGZ,oEAAU,CAAC,CAAC;MAC5BY,OAAO,CAACN,YAAY,GAAG,KAAK;IAC7B;EACD,CAAC;EAED+C,SAAS,EAAE;IACVC,eAAeA,CAAA,EAAG;MACjBC,MAAM,CAACC,gBAAgB,CAAE,SAAS,EAAI/C,KAAK,IAAM;QAChD,IAAK,QAAQ,KAAKA,KAAK,CAACgD,GAAG,EAAG;UAC7BxD,+DAAK,CAAE,yBAA0B,CAAC,CAACM,OAAO,CAAC6C,UAAU,CAAC,CAAC;QACxD;MACD,CAAE,CAAC;IACJ;EACD;AACD,CAAC,CAAC,C","sources":["webpack://woo-categories-grid-block/external module \"@wordpress/interactivity\"","webpack://woo-categories-grid-block/webpack/bootstrap","webpack://woo-categories-grid-block/webpack/runtime/make namespace object","webpack://woo-categories-grid-block/./src/categories-grid/interactivity.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { getContext, store } from '@wordpress/interactivity';\n\nstore('buntywp/categories-grid', {\n\tstate: () => ({\n\t\tselectedCategory: null,\n\t\tselectedCategoryName: null,\n\t\tloading: false,\n\t\tshowProducts: false,\n\t}),\n\tactions: {\n\t\tasync loadProducts(event) {\n\n\t\t\tconsole.log('loadProducts');\n\n\t\t\tconst context = getContext();\n\t\t\tconst block = event.target.closest('[data-wp-interactive]');\n\t\t\tconst state = store( 'buntywp/categories-grid' ).state;\n\n\t\t\tconst categoryEl = event.target.closest('.category-slide');\n\t\t\tconst categoryId = categoryEl?.dataset.categoryId;\n\t\t\tconst categoryName = categoryEl?.dataset.categoryName;\n\t\t\tconst productsGrid = block.querySelector('.products-grid');\n\t\t\tconst gridCategory = productsGrid?.dataset.cat;\n\n\t\t\tcontext.showProducts = true;\n\t\t\tcontext.selectedCategory = categoryId;\n\t\t\tcontext.selectedCategoryName = categoryName;\n\n\t\t\tif (gridCategory === categoryId) return;\n\n\t\t\tcontext.loading = true;\n\t\t\tproductsGrid.innerHTML = '';\n\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(state.ajaxUrl, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t},\n\t\t\t\t\tbody: new URLSearchParams({\n\t\t\t\t\t\taction: 'wcc_get_category_products',\n\t\t\t\t\t\tnonce: state.nonce,\n\t\t\t\t\t\tcategory_id: categoryId,\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\tconst data = await response.json();\n\n\t\t\t\tconsole.log('data',data);\n\n\t\t\t\tif (data.success) {\n\t\t\t\t\tproductsGrid.innerHTML = data.data.products\n\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t(product) => `\n\t\t\t\t\t\t\t<div class=\"product-card\">\n\t\t\t\t\t\t\t\t<img src=\"${product.image}\" alt=\"${product.title}\" />\n\t\t\t\t\t\t\t\t<h3>${product.title}</h3>\n\t\t\t\t\t\t\t\t<div class=\"price\">${product.price}</div>\n\t\t\t\t\t\t\t\t<a href=\"${product.link}\" class=\"view-product\">View Product</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.join('');\n\n\t\t\t\t\tblock\n\t\t\t\t\t\t.querySelectorAll('.bwp-category-link a')\n\t\t\t\t\t\t.forEach((el) => el.setAttribute('href', data.data.category_link));\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Fetch error:', error);\n\t\t\t} finally {\n\t\t\t\tcontext.loading = false;\n\t\t\t}\n\t\t},\n\t\tcloseModal() {\n\t\t\tconst context = getContext();\n\t\t\tcontext.showProducts = false;\n\t\t},\n\t},\n\n\tcallbacks: {\n\t\twatchCategories() {\n\t\t\twindow.addEventListener( 'keydown', ( event ) => {\n\t\t\t\tif ( 'Escape' === event.key ) {\n\t\t\t\t\tstore( 'buntywp/categories-grid' ).actions.closeModal();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t},\n});\n"],"names":["getContext","store","state","selectedCategory","selectedCategoryName","loading","showProducts","actions","loadProducts","event","console","log","context","block","target","closest","categoryEl","categoryId","dataset","categoryName","productsGrid","querySelector","gridCategory","cat","innerHTML","response","fetch","ajaxUrl","method","headers","body","URLSearchParams","action","nonce","category_id","data","json","success","products","map","product","image","title","price","link","join","querySelectorAll","forEach","el","setAttribute","category_link","error","closeModal","callbacks","watchCategories","window","addEventListener","key"],"sourceRoot":""}
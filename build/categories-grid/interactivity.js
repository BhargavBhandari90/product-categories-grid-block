import*as t from"@wordpress/interactivity";var e={d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const o=(a={getContext:()=>t.getContext,store:()=>t.store},r={},e.d(r,a),r);var a,r;(0,o.store)("buntywp/categories-grid",{state:()=>({selectedCategory:null,selectedCategoryName:null,loading:!1,showProducts:!1}),actions:{async loadProducts(t){console.log("loadProducts");const e=(0,o.getContext)(),a=t.target.closest("[data-wp-interactive]"),r=(0,o.store)("buntywp/categories-grid").state,c=t.target.closest(".category-slide"),s=c?.dataset.categoryId,n=c?.dataset.categoryName,d=a.querySelector(".products-grid"),i=d?.dataset.cat;if(e.showProducts=!0,e.selectedCategory=s,e.selectedCategoryName=n,i!==s){e.loading=!0,d.innerHTML="";try{const t=await fetch(r.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"wcc_get_category_products",nonce:r.nonce,category_id:s})}),e=await t.json();console.log("data",e),e.success&&(d.innerHTML=e.data.products.map((t=>`\n\t\t\t\t\t\t\t<div class="product-card">\n\t\t\t\t\t\t\t\t<img src="${t.image}" alt="${t.title}" />\n\t\t\t\t\t\t\t\t<h3>${t.title}</h3>\n\t\t\t\t\t\t\t\t<div class="price">${t.price}</div>\n\t\t\t\t\t\t\t\t<a href="${t.link}" class="view-product">View Product</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`)).join(""),a.querySelectorAll(".bwp-category-link a").forEach((t=>t.setAttribute("href",e.data.category_link))))}catch(t){console.error("Fetch error:",t)}finally{e.loading=!1}}},closeModal(){(0,o.getContext)().showProducts=!1}},callbacks:{watchCategories(){window.addEventListener("keydown",(t=>{"Escape"===t.key&&(0,o.store)("buntywp/categories-grid").actions.closeModal()}))}}});
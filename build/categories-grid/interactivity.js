import*as t from"@wordpress/interactivity";var e={d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const a=(o={getContext:()=>t.getContext,store:()=>t.store},r={},e.d(r,o),r);var o,r;(0,a.store)("buntywp/categories-grid",{state:()=>({selectedCategory:null,selectedCategoryName:null,loading:!1,showProducts:!1}),actions:{async loadProducts(t){const e=(0,a.getContext)(),o=t.target.closest("[data-wp-interactive]"),r=(0,a.store)("buntywp/categories-grid").state,c=t.target.closest(".category-slide"),s=c?.dataset.categoryId,n=c?.dataset.categoryName,d=o.querySelector(".products-grid"),i=d?.dataset.cat;if(e.showProducts=!0,e.selectedCategory=s,e.selectedCategoryName=n,i!==s){e.loading=!0,d.innerHTML="";try{const t=await fetch(r.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"buntywp_pcgb_get_category_products",nonce:r.nonce,category_id:s})}),e=await t.json();console.log("data",e),e.success&&(d.innerHTML=e.data.products.map((t=>`\n\t\t\t\t\t\t\t<div class="product-card">\n\t\t\t\t\t\t\t\t<img src="${t.image}" alt="${t.title}" />\n\t\t\t\t\t\t\t\t<h3>${t.title}</h3>\n\t\t\t\t\t\t\t\t<div class="price">${t.price}</div>\n\t\t\t\t\t\t\t\t<a href="${t.link}" class="view-product">View Product</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`)).join(""),o.querySelectorAll(".bwp-category-link a").forEach((t=>t.setAttribute("href",e.data.category_link))))}catch(t){console.error("Fetch error:",t)}finally{e.loading=!1}}},closeModal(){(0,a.getContext)().showProducts=!1}},callbacks:{watchCategories(){window.addEventListener("keydown",(t=>{"Escape"===t.key&&(0,a.store)("buntywp/categories-grid").actions.closeModal()}))}}});
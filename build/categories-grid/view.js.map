{"version":3,"file":"categories-grid/view.js","mappings":"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","sources":["webpack://product-categories-grid-block/./src/categories-grid/interactivity.js","webpack://product-categories-grid-block/external module \"@wordpress/interactivity\"","webpack://product-categories-grid-block/webpack/bootstrap","webpack://product-categories-grid-block/webpack/runtime/make namespace object","webpack://product-categories-grid-block/./src/categories-grid/view.js"],"sourcesContent":["import { getContext, store } from '@wordpress/interactivity';\n\nstore( 'buntywp/categories-grid', {\n\tstate: () => ( {\n\t\tselectedCategory: null,\n\t\tselectedCategoryName: null,\n\t\tloading: false,\n\t\tshowProducts: false,\n\t} ),\n\tactions: {\n\t\tasync loadProducts( event ) {\n\n\t\t\tconst context = getContext();\n\t\t\tconst block = event.target.closest( '[data-wp-interactive]' );\n\t\t\tconst state = store( 'buntywp/categories-grid' ).state;\n\n\t\t\tconst categoryEl = event.target.closest( '.category-slide' );\n\t\t\tconst categoryId = categoryEl?.dataset.categoryId;\n\t\t\tconst categoryName = categoryEl?.dataset.categoryName;\n\t\t\tconst productsGrid = block.querySelector( '.products-grid' );\n\t\t\tconst gridCategory = productsGrid?.dataset.cat;\n\n\t\t\tcontext.showProducts = true;\n\t\t\tcontext.selectedCategory = categoryId;\n\t\t\tcontext.selectedCategoryName = categoryName;\n\n\t\t\tif ( gridCategory === categoryId ) return;\n\n\t\t\tcontext.loading = true;\n\t\t\tproductsGrid.innerHTML = '';\n\n\t\t\ttry {\n\t\t\t\tconst response = await fetch( state.ajaxUrl, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t},\n\t\t\t\t\tbody: new URLSearchParams( {\n\t\t\t\t\t\taction: 'buntywp_pcgb_get_category_products',\n\t\t\t\t\t\tnonce: state.nonce,\n\t\t\t\t\t\tcategory_id: categoryId,\n\t\t\t\t\t} ),\n\t\t\t\t} );\n\n\t\t\t\tconst data = await response.json();\n\n\t\t\t\tconsole.log( 'data', data );\n\n\t\t\t\tif ( data.success ) {\n\t\t\t\t\tproductsGrid.innerHTML = data.data.products\n\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t( product ) => `\n\t\t\t\t\t\t\t<div class=\"product-card\">\n\t\t\t\t\t\t\t\t<img src=\"${ product.image }\" alt=\"${ product.title }\" />\n\t\t\t\t\t\t\t\t<h3>${ product.title }</h3>\n\t\t\t\t\t\t\t\t<div class=\"price\">${ product.price }</div>\n\t\t\t\t\t\t\t\t<a href=\"${ product.link }\" class=\"view-product\">View Product</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.join( '' );\n\n\t\t\t\t\tblock\n\t\t\t\t\t\t.querySelectorAll( '.bwp-category-link a' )\n\t\t\t\t\t\t.forEach( ( el ) =>\n\t\t\t\t\t\t\tel.setAttribute( 'href', data.data.category_link )\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\tconsole.error( 'Fetch error:', error );\n\t\t\t} finally {\n\t\t\t\tcontext.loading = false;\n\t\t\t}\n\t\t},\n\t\tcloseModal() {\n\t\t\tconst context = getContext();\n\t\t\tcontext.showProducts = false;\n\t\t},\n\t},\n\n\tcallbacks: {\n\t\twatchCategories() {\n\t\t\twindow.addEventListener( 'keydown', ( event ) => {\n\t\t\t\tif ( 'Escape' === event.key ) {\n\t\t\t\t\tstore( 'buntywp/categories-grid' ).actions.closeModal();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t},\n} );\n","module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Import our interactivity file.\nimport './interactivity';\n"],"names":["getContext","store","state","selectedCategory","selectedCategoryName","loading","showProducts","actions","loadProducts","event","context","block","target","closest","categoryEl","categoryId","dataset","categoryName","productsGrid","querySelector","gridCategory","cat","innerHTML","response","fetch","ajaxUrl","method","headers","body","URLSearchParams","action","nonce","category_id","data","json","console","log","success","products","map","product","image","title","price","link","join","querySelectorAll","forEach","el","setAttribute","category_link","error","closeModal","callbacks","watchCategories","window","addEventListener","key"],"sourceRoot":""}
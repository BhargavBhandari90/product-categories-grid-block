{"version":3,"file":"categories-grid/view.js","mappings":"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","sources":["webpack://woo-categories-grid-block/./src/categories-grid/interactivity.js","webpack://woo-categories-grid-block/external module \"@wordpress/interactivity\"","webpack://woo-categories-grid-block/webpack/bootstrap","webpack://woo-categories-grid-block/webpack/runtime/make namespace object","webpack://woo-categories-grid-block/./src/categories-grid/view.js"],"sourcesContent":["import { store } from '@wordpress/interactivity';\n\nstore( 'buntywp/categories-grid', {\n\tstate: {\n\t\tselectedCategory: null,\n\t\tselectedCategoryName: null,\n\t\tloading: false,\n\t\tshowProducts: false,\n\t},\n\tactions: {\n\t\tasync loadProducts( event ) {\n\t\t\tconst state = store( 'buntywp/categories-grid' ).state;\n\t\t\tconst categoryId =\n\t\t\t\tevent.target.closest( '.category-slide' ).dataset.categoryId;\n\t\t\tconst categoryName =\n\t\t\t\tevent.target.closest( '.category-slide' ).dataset.categoryName;\n\t\t\tconst productsGrid = document.querySelector( '.products-grid' );\n\t\t\tconst gridCategory = productsGrid.dataset.cat;\n\n\t\t\tstate.showProducts = true;\n\t\t\tstate.selectedCategory = categoryId;\n\t\t\tstate.selectedCategoryName = categoryName;\n\n\t\t\tif ( gridCategory === categoryId ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tstate.loading = true;\n\t\t\tproductsGrid.innerHTML = '';\n\n\t\t\ttry {\n\t\t\t\tconst response = await fetch( state.ajaxUrl, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t},\n\t\t\t\t\tbody: new URLSearchParams( {\n\t\t\t\t\t\taction: 'wcc_get_category_products',\n\t\t\t\t\t\tnonce: state.nonce,\n\t\t\t\t\t\tcategory_id: categoryId,\n\t\t\t\t\t} ),\n\t\t\t\t} );\n\n\t\t\t\tconst data = await response.json();\n\n\t\t\t\tif ( data.success ) {\n\t\t\t\t\tproductsGrid.innerHTML = data.data.products\n\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t( product ) => `\n                        <div class=\"product-card\">\n                            <img src=\"${ product.image }\" alt=\"${ product.title }\" />\n                            <h3>${ product.title }</h3>\n                            <div class=\"price\">${ product.price }</div>\n                            <a href=\"${ product.link }\" class=\"view-product\">View Product</a>\n                        </div>\n                    `\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.join( '' );\n\t\t\t\t\tdocument\n\t\t\t\t\t\t.querySelectorAll( '.bwp-category-link a' )\n\t\t\t\t\t\t.forEach( ( el ) => {\n\t\t\t\t\t\t\tel.setAttribute( 'href', data.data.category_link );\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\treturn false;\n\t\t\t} finally {\n\t\t\t\tstate.loading = false;\n\t\t\t}\n\t\t},\n\t\tcloseModal() {\n\t\t\tconst state = store( 'buntywp/categories-grid' ).state;\n\t\t\tstate.showProducts = false;\n\t\t},\n\t},\n\tcallbacks: {\n\t\twatchCategories() {\n\t\t\twindow.addEventListener( 'keydown', ( event ) => {\n\t\t\t\tif ( 'Escape' === event.key ) {\n\t\t\t\t\tstore( 'buntywp/categories-grid' ).actions.closeModal();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\t},\n} );\n","module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Import our interactivity file.\nimport './interactivity';\n"],"names":["store","state","selectedCategory","selectedCategoryName","loading","showProducts","actions","loadProducts","event","categoryId","target","closest","dataset","categoryName","productsGrid","document","querySelector","gridCategory","cat","innerHTML","response","fetch","ajaxUrl","method","headers","body","URLSearchParams","action","nonce","category_id","data","json","success","products","map","product","image","title","price","link","join","querySelectorAll","forEach","el","setAttribute","category_link","error","closeModal","callbacks","watchCategories","window","addEventListener","key"],"sourceRoot":""}